(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3971:function(e,t,l){Promise.resolve().then(l.bind(l,9296))},9296:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return N}});var s=l(7437),a=l(2265),i=l(6648),r=e=>{let{setinput:t,input:l}=e,[i,r]=(0,a.useState)([]),[n,c]=(0,a.useState)(!0),[o,d]=(0,a.useState)(null);return((0,a.useEffect)(()=>{(async()=>{try{let e=await fetch("https://api.slingacademy.com/v1/sample-data/photos");if(!e.ok)throw Error("Network response was not ok");let t=await e.json();console.log(t),r(t.photos)}catch(e){d("Failed to fetch photos")}finally{c(!1)}})()},[]),n)?(0,s.jsx)("p",{children:"Loading..."}):o?(0,s.jsx)("p",{children:o}):(0,s.jsx)("div",{className:"grid grid-cols-3 gap-3 h-96 overflow-auto",children:i.map(e=>(0,s.jsx)("div",{className:"cursor-pointer",onClick:()=>t(e.url),children:(0,s.jsx)("img",{src:e.url,alt:e.title,className:"w-40 h-40 border-4  ".concat(l===e.url?"border-4 border-blue-500":"")})},e.id))})},n=e=>{let{onClick:t,text:l}=e;return(0,s.jsx)("div",{onClick:t,className:"self-center px-4 py-2 font-medium cursor-pointer tracking-widest w-fit text-sm bg-white border rounded-lg",children:l})},c=e=>{let{setNewValue:t,value:l,column:c}=e,[o,d]=(0,a.useState)(""),[u,x]=(0,a.useState)(!1);return(0,s.jsxs)("div",{className:"border-2 p-2 bg-white border-dashed w-full min-h-[20vh] flex items-center justify-between",children:[u?(0,s.jsx)("div",{className:"absolute top-0 left-0 right-0 bottom-0 flex justify-center items-center bg-black bg-opacity-10",children:(0,s.jsxs)("div",{className:"bg-slate-100 p-4 rounded-md relative flex flex-col items-center gap-2",children:[(0,s.jsx)("div",{onClick:()=>x(!1),className:"absolute top-0 right-0",children:"x"}),(0,s.jsx)(r,{setinput:d,input:o}),(0,s.jsx)(n,{onClick:()=>{t(l.id,c,o),x(!1)},text:"Apply"})]})}):null,(0,s.jsx)("div",{className:"flex justify-center flex-col items-center gap-2 w-full",children:l[c]?(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(i.default,{src:l[c],width:160,height:160,alt:"image",className:"rounded-lg cursor-pointer",onClick:()=>{x(!0)}})}):(0,s.jsx)(n,{onClick:()=>{x(!0)},text:"Add Design"})})]})},o=l(3277);let d=(0,o.W6)(()=>(0,s.jsxs)("div",{className:"cursor-pointer flex flex-col gap-1 justify-center",title:"Reorder items",children:[(0,s.jsx)("div",{className:"w-4 bg-gray-500 h-[2px]"}),(0,s.jsx)("div",{className:"w-4 bg-gray-500 h-[2px]"}),(0,s.jsx)("div",{className:"w-4 bg-gray-500 h-[2px]"})]}));var u=e=>{var t;let{setNewValue:l,value:i,column:r,removeItemById:c,position:o}=e,[u,x]=(0,a.useState)(""),[m,p]=(0,a.useState)(!1);return(0,s.jsxs)("div",{className:"w-full gap-4 border-2 p-2 bg-white border-dashed full min-h-[20vh] flex items-center justify-between text-gray-700",children:[(0,s.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,s.jsx)(d,{}),(0,s.jsx)("div",{className:"text-xl",children:o}),(0,s.jsx)("div",{onClick:()=>c(i.id),className:"text-2xl px-2 py-0 rounded-full cursor-pointer",children:(0,s.jsx)("p",{title:"Delete Item",children:"✗"})})]}),m?(0,s.jsx)("div",{className:"absolute top-0 left-0 right-0 bottom-0 flex justify-center items-center bg-black bg-opacity-10",children:(0,s.jsxs)("div",{className:"bg-slate-100 p-4 rounded-md relative flex flex-col items-center",children:[(0,s.jsx)("div",{onClick:()=>p(!1),className:"absolute top-0 right-0",children:"x"}),(0,s.jsx)("input",{type:"text",value:u,onChange:e=>x(e.target.value),className:"outline-none p-2",placeholder:"Enter Filter"}),(0,s.jsx)(n,{onClick:()=>{l(i.id,r,u),p(!1)},text:"Apply"})]})}):null,(0,s.jsx)("div",{className:"flex justify-center items-center gap-4 w-full",children:(0,s.jsx)("div",{onClick:()=>{p(!0)},className:"border border-gray-300 p-4 flex-grow max-w-[150px] lg:max-w-[200px] text-clip overflow-auto flex gap-1",children:null===(t=i[r])||void 0===t?void 0:t.split(" ").map((e,t)=>(0,s.jsx)("div",{className:"border p-1 rounded-lg capitalize",children:e}))})})]})},x=e=>{let{removeItemById:t,setNewValue:l,value:a,column:i,index:r,position:n}=e;return(0,s.jsx)("div",{className:"flex flex-col items-center gap-4 capitalize justify-center",children:0==r?(0,s.jsx)(u,{setNewValue:l,value:a,column:i,removeItemById:t,position:n}):(0,s.jsx)(c,{setNewValue:l,value:a,column:i})})},m=e=>{let{value:t,columns:l,removeItemById:a,updateItemValue:i,dragging:r,position:n}=e,c=(e,t,l)=>{i(e,t,l)};return(0,s.jsx)("tr",{className:"".concat(r?"opacity-30":""),children:l.map((e,l)=>(0,s.jsx)("td",{children:(0,s.jsx)(x,{removeItemById:a,setNewValue:c,value:t,column:e,index:l,position:n})},l))})};let p=(e,t,l)=>{e.splice(l<0?e.length+l:l,0,e.splice(t,1)[0])},h=(e,t,l)=>(p(e=e.slice(),t,l),e),f=(0,o.JN)(e=>{let{children:t}=e;return(0,s.jsx)("tbody",{children:t})}),g=(0,o.W8)(e=>(0,s.jsx)(m,{...e}));var j=e=>{let{data:t,setData:l,columns:i,updateItemValue:r,removeItemById:n,removeColumn:c,addColumn:o}=e,d=(0,a.useCallback)(e=>{let{oldIndex:t,newIndex:s}=e;l(e=>h(e,t,s)),x(!1)},[]),[u,x]=(0,a.useState)(!1);return(0,s.jsx)("div",{className:"h-[60vh] overflow-auto",children:(0,s.jsxs)("table",{children:[(0,s.jsx)("thead",{className:"relative",children:(0,s.jsx)("tr",{children:i.map((e,t)=>(0,s.jsx)("th",{children:(0,s.jsxs)("div",{className:"flex justify-between items-center text-gray-500",children:[(0,s.jsx)("div",{children:e}),t>1?(0,s.jsx)("div",{onClick:()=>c(e),className:"text-2xl px-2 py-0 rounded-full cursor-pointer",children:(0,s.jsx)("p",{title:"Delete Variant",children:"✗"})}):null]})},t))})}),(0,s.jsx)(f,{onSortEnd:d,onSortStart:()=>x(!0),axis:"y",lockAxis:"y",lockToContainerEdges:!0,useDragHandle:!0,children:t.map((e,t)=>(0,s.jsx)(g,{index:t,value:e,columns:i,removeItemById:n,updateItemValue:r,addColumn:o,dragging:u,position:t},"item-".concat(t)))})]})})};function v(){let[e,t]=(0,a.useState)([]),[l,i]=(0,a.useState)(["Product Filter","Primary Variant"]),[r,c]=(0,a.useState)(1),[o,d]=(0,a.useState)(!1);(0,a.useEffect)(()=>{{let e=localStorage.getItem("data_inital");e&&t(JSON.parse(e));let l=localStorage.getItem("columns_initial");l&&i(JSON.parse(l));let s=localStorage.getItem("columns_counter"),a=s?parseInt(s,10):1;c(isNaN(a)?1:a),d(!0)}},[]),(0,a.useEffect)(()=>{o&&localStorage.setItem("data_inital",JSON.stringify(e))},[e]),(0,a.useEffect)(()=>{o&&localStorage.setItem("columns_initial",JSON.stringify(l))},[l]),(0,a.useEffect)(()=>{o&&localStorage.setItem("columns_counter",JSON.stringify(r))},[r]);let u=()=>{let l={};l.id="id_"+e.length,t(e=>[...e,l])},x=()=>{i(e=>[...e,"Variant "+r]),c(e=>e+1)};return(0,s.jsxs)("div",{className:"mt-24 w-full flex flex-col gap-4 bg-gray-100 rounded-xl p-4 h-[70vh] overflow-auto",children:[(0,s.jsx)(j,{data:e,setData:t,columns:l,updateItemValue:(e,l,s)=>{t(t=>t.map(t=>t.id===e?{...t,[l]:s}:t))},removeItemById:e=>{t(t=>t.filter(t=>t.id!==e))},removeColumn:e=>{i(t=>t.filter(t=>t!==e))},addColumn:x}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)(n,{onClick:()=>u(),text:"Add Item"}),(0,s.jsx)(n,{onClick:()=>x(),text:"Add Variant"})]})]})}function N(){return(0,s.jsxs)("div",{className:"mx-4 lg:mx-24",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center my-4",children:[(0,s.jsx)("h1",{className:"text-center",children:"Rules Creation"}),(0,s.jsx)("div",{className:"bg-red-400 px-8 py-4 rounded-md font-medium cursor-pointer tracking-widest",children:"Publish"})]}),(0,s.jsx)(v,{})]})}}},function(e){e.O(0,[635,971,23,744],function(){return e(e.s=3971)}),_N_E=e.O()}]);